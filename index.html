<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pool Poker Game</title>

<style>
/* ====== 基本布局 ====== */
body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #eee;
    padding: 20px;
}
#table {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}

/* ====== 撞球按鈕 ====== */
.ball-btn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    font-weight: bold;
    cursor: pointer;
    border: 3px solid #fff;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    color: black;
    background: #f0f0f0;
}

/* 文字在最上層 */
.ball-btn span {
    position: relative;
    z-index: 3;
}

/* ====== 條紋球（1、9~15） ====== */
.ball-btn.stripe::before {
    content: "";
    position: absolute;
    width: 80%;
    height: 30%;
    background: rgba(255,255,255,0.9);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    border-radius: 6px;
}

/* 彩色外圈（球本身顏色） */
.ball-btn.stripe::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 50%;
    z-index: 0;
    border: 12px solid currentColor;
    box-sizing: border-box;
}

/* ====== 選取狀態 ====== */
.ball-btn.selected {
    box-shadow: 0 0 0 4px white;
}

/* ====== 玩家牌區 ====== */
.card {
    width: 40px;
    height: 60px;
    background: white;
    border: 2px solid #000;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: black;
    margin: 4px;
}
.highlight {
    border-color: yellow;
    box-shadow: 0 0 10px yellow;
}
</style>

</head>
<body>

<h2>Pool Poker Game</h2>

<!-- 撞球按鈕區 -->
<div id="table"></div>

<!-- 玩家牌 -->
<div>
    <h3>你的牌：</h3>
    <div id="myCards" style="display:flex;"></div>
</div>

<!-- 重發牌 -->
<button id="resetBtn">重新發牌</button>

<!-- Firebase + Game Logic -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";

/* ====== Firebase config（你提供的） ====== */
const firebaseConfig = {
    apiKey: "AIzaSyCk54DEp6rzvpfQBBNW_iJByZ3boyHEPF0",
    authDomain: "poolpokergame-b88ed.firebaseapp.com",
    projectId: "poolpokergame-b88ed",
    storageBucket: "poolpokergame-b88ed.firebasestorage.app",
    messagingSenderId: "574863840102",
    appId: "1:574863840102:web:14368aaf84b3640c6eeea7"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ====== HTML DOM ====== */
const table = document.getElementById("table");
const myCardsDiv = document.getElementById("myCards");
const resetBtn = document.getElementById("resetBtn");

/* ====== 測試用：給你固定的手牌 ====== */
let myCards = ["H11", "D12", "S13", "C7", "H3"]; // J,Q,K,7,3

/* ====== 初始化顯示手牌 ====== */
function renderMyCards(highlightRank = null) {
    myCardsDiv.innerHTML = "";
    myCards.forEach(c => {
        const rank = parseInt(c.slice(1));
        const div = document.createElement("div");
        div.className = "card";
        if (highlightRank !== null && highlightRank === rank) {
            div.classList.add("highlight");
        }
        div.textContent = c;
        myCardsDiv.appendChild(div);
    });
}

/* ====== Toggle number highlight ====== */
function toggleNumber(n) {
    renderMyCards(n);
}

/* ====== 建立撞球按鈕 ====== */
function renderBalls() {
    table.innerHTML = "";

    for (let n = 1; n <= 15; n++) {
        const btn = document.createElement("button");
        btn.className = "ball-btn";
        btn.innerHTML = `<span>${n}</span>`;

        /* 條紋球外觀：1、9~15 */
        if ([1,9,10,11,12,13,14,15].includes(n)) {
            btn.classList.add("stripe");
        }

        /* 顏色設定（使用 currentColor） */
        const colorMap = {
            1: "#fdd835",
            2: "#1976d2",
            3: "#d32f2f",
            4: "#7b1fa2",
            5: "#ff9800",
            6: "#388e3c",
            7: "#5d4037",
            8: "#000000",
            9: "#1976d2",
            10: "#d32f2f",
            11: "#7b1fa2",
            12: "#ff9800",
            13: "#388e3c",
            14: "#5d4037",
            15: "#d32f2f"
        };
        btn.style.color = colorMap[n];

        /* 點擊行為 */
        btn.onclick = () => {
            btn.classList.toggle("selected");
            toggleNumber(n);
        };

        table.appendChild(btn);
    }
}

/* ====== 重發牌：清除選取 ====== */
resetBtn.onclick = () => {
    document.querySelectorAll(".ball-btn").forEach(b => b.classList.remove("selected"));
    renderMyCards(null);
};

/* ====== 初始渲染 ====== */
renderBalls();
renderMyCards();
</script>

</body>
</html>
